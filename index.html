<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaymentAPI - Enterprise Payment Gateway Documentation</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #0969da;
            --primary-hover: #0860ca;
            --secondary-color: #6f42c1;
            --accent-color: #d73a49;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --info-color: #17a2b8;

            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --bg-code: #f6f8fa;

            --text-primary: #24292f;
            --text-secondary: #656d76;
            --text-muted: #8b949e;
            --text-link: #0969da;

            --border-color: #d1d9e0;
            --border-muted: #e1e4e8;

            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        /* 清爽的背景纹理 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                linear-gradient(90deg, transparent 79px, rgba(0,0,0,0.02) 81px, transparent 82px),
                linear-gradient(rgba(0,0,0,0.02) 0.5px, transparent 0.5px);
            background-size: 80px 80px;
            z-index: -1;
            opacity: 0.3;
        }

        .app-layout {
            display: flex;
            min-height: 100vh;
        }

        /* 左侧边栏 */
        .sidebar {
            width: 280px;
            background: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0 0 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sidebar-header h1 i {
            color: var(--primary-color);
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin: 0 0 12px 0;
        }

        .version-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* 导航菜单 */
        .nav-menu {
            padding: 20px 0;
        }

        .nav-item {
            display: block;
            padding: 12px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-item:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--primary-color);
            color: white;
            border-right: 3px solid var(--primary-color);
        }

        .nav-item i {
            width: 16px;
            text-align: center;
            font-size: 0.875rem;
        }

        /* 主内容区域 */
        .main-content {
            flex: 1;
            margin-left: 280px;
            background: var(--bg-primary);
            display: flex;
        }

        .content-wrapper {
            flex: 1;
            max-width: calc(100% - 240px);
            margin: 0 auto;
            padding: 0 20px;
        }

        .content-header {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
            padding: 20px 40px;
            position: sticky;
            top: 0;
            z-index: 50;
            width: 100%;
            box-sizing: border-box;
        }

        .content-header h1 {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .content-body {
            padding: 32px 40px;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            box-sizing: border-box;
        }

        /* 右侧目录索引 */
        .toc-sidebar {
            width: 240px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            padding: 20px 0;
        }

        .toc-title {
            padding: 0 20px 12px 20px;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 16px;
        }

        .toc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .toc-item {
            margin: 0;
        }

        .toc-link {
            display: block;
            padding: 6px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.8125rem;
            line-height: 1.4;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .toc-link:hover {
            color: var(--text-primary);
            background: var(--bg-primary);
        }

        .toc-link.active {
            color: var(--primary-color);
            background: var(--bg-primary);
            border-left-color: var(--primary-color);
        }

        .toc-link.level-2 {
            padding-left: 32px;
            font-size: 0.75rem;
        }

        .toc-link.level-3 {
            padding-left: 44px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* 移动端汉堡菜单 */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 200;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
        }



        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            font-size: 1.75rem;
            color: var(--text-primary);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }

        .section h2 i {
            color: var(--primary-color);
            font-size: 1.5rem;
        }

        .section h3 {
            font-size: 1.25rem;
            color: var(--text-primary);
            margin: 28px 0 16px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .section h3 i {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .api-endpoint {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .api-endpoint h3 {
            margin-top: 0;
            margin-bottom: 8px;
            font-size: 1.125rem;
        }

        .api-endpoint p {
            color: var(--text-secondary);
            margin: 0;
            font-size: 0.9rem;
        }

        .method {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .method.post {
            background: var(--success-color);
            color: white;
        }
        .method.get {
            background: var(--primary-color);
            color: white;
        }

        .code-block {
            background: var(--bg-code);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 20px;
            border-radius: 6px;
            margin: 16px 0;
            overflow-x: auto;
            position: relative;
        }

        .code-block code {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            color: var(--text-primary);
            display: block;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin: 0;
            padding: 0;
            background: none;
        }

        .copy-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .copy-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .param-table th,
        .param-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-muted);
            font-size: 0.875rem;
        }

        .param-table th {
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.8125rem;
        }

        .param-table td {
            color: var(--text-secondary);
        }

        .param-table tr:hover {
            background: var(--bg-secondary);
        }

        .param-table tr:last-child td {
            border-bottom: none;
        }

        .param-table code {
            background: var(--bg-code);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8125rem;
            color: var(--text-primary);
        }

        .required {
            color: var(--accent-color);
            font-weight: 600;
            font-size: 0.75rem;
        }

        .optional {
            color: var(--text-muted);
            font-weight: 500;
            font-size: 0.75rem;
        }

        .alert {
            padding: 16px 20px;
            border-radius: 6px;
            margin: 20px 0;
            border-left: 4px solid;
            background: var(--bg-secondary);
        }

        .alert-info {
            border-left-color: var(--info-color);
            background: #f0f9ff;
            color: #0c4a6e;
        }

        .alert-warning {
            border-left-color: var(--warning-color);
            background: #fffbeb;
            color: #92400e;
        }

        .alert-success {
            border-left-color: var(--success-color);
            background: #f0fdf4;
            color: #166534;
        }

        .alert strong {
            font-weight: 600;
        }

        .status-code {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 0.8125rem;
            font-weight: 600;
        }

        .status-200 {
            background: #dcfce7;
            color: #166534;
        }
        .status-400 {
            background: #fef2f2;
            color: #dc2626;
        }
        .status-500 {
            background: #fef2f2;
            color: #dc2626;
        }

        .footer {
            text-align: center;
            padding: 48px 40px;
            color: var(--text-secondary);
            margin-top: 64px;
            margin-left: -40px;
            margin-right: -40px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-secondary);
            width: calc(100% + 80px);
            clear: both;
            box-sizing: border-box;
            position: relative;
        }

        .footer p {
            margin-bottom: 8px;
            font-size: 0.875rem;
        }

        .footer a {
            color: var(--text-link);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        /* 响应式设计 */
        @media (max-width: 1200px) {
            .toc-sidebar {
                display: none;
            }

            .content-wrapper {
                max-width: 100%;
                padding: 0 40px;
            }

            .footer {
                margin-left: -40px;
                margin-right: -40px;
                width: calc(100% + 80px);
            }
        }

        /* 折叠区域样式 */
        .collapsible-section {
            margin: 20px 0;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            background: var(--bg-primary);
        }

        .collapsible-header {
            padding: 16px 20px;
            background: var(--bg-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            user-select: none;
        }

        .collapsible-header:hover {
            background: var(--bg-tertiary);
        }

        .collapsible-header h3 {
            margin: 0;
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .collapsible-header h4 {
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .collapsible-icon {
            transition: transform 0.3s ease;
            color: var(--text-secondary);
            font-size: 1.25rem;
        }

        .collapsible-section.active .collapsible-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .collapsible-section.active .collapsible-content {
            max-height: 3000px;
        }

        .collapsible-body {
            padding: 20px;
        }

        /* 导航栏子菜单样式 */
        .nav-item-parent {
            position: relative;
        }

        .nav-item-parent .nav-item-toggle {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            transition: transform 0.3s ease;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .nav-item-parent.expanded .nav-item-toggle {
            transform: translateY(-50%) rotate(180deg);
        }

        .nav-submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: var(--bg-secondary);
        }

        .nav-item-parent.expanded .nav-submenu {
            max-height: 200px;
        }

        .nav-submenu .nav-item {
            padding-left: 48px;
            font-size: 0.9375rem;
            background: transparent;
        }

        .nav-submenu .nav-item:hover {
            background: var(--bg-tertiary);
        }

        .nav-submenu .nav-item.active {
            background: var(--primary-color);
            color: white;
        }

        @media (max-width: 1024px) {
            .sidebar {
                width: 260px;
            }

            .main-content {
                margin-left: 260px;
            }

            .content-body {
                padding: 24px 32px;
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .content-header {
                padding: 20px 24px;
                padding-left: 60px;
            }

            .content-body {
                padding: 20px 24px;
            }

            .content-wrapper {
                padding: 0 20px;
            }

            .footer {
                margin-left: -24px;
                margin-right: -24px;
                width: calc(100% + 48px);
                padding: 32px 24px;
            }

            .section h2 {
                font-size: 1.5rem;
            }

            .section h3 {
                font-size: 1.125rem;
            }

            .param-table {
                font-size: 0.8125rem;
            }

            .param-table th,
            .param-table td {
                padding: 10px 12px;
            }

            .code-block {
                padding: 16px;
                font-size: 0.8125rem;
            }

            .copy-btn {
                position: static;
                margin-bottom: 12px;
                align-self: flex-start;
            }
        }

        @media (max-width: 480px) {
            .content-header h1 {
                font-size: 1.5rem;
            }

            .content-body {
                padding: 16px 20px;
            }

            .content-wrapper {
                padding: 0 16px;
            }

            .param-table th,
            .param-table td {
                padding: 8px 10px;
            }

            .footer {
                margin-left: -20px;
                margin-right: -20px;
                width: calc(100% + 40px);
                padding: 32px 20px;
                margin-top: 32px;
            }

            .content-header {
                padding: 16px 20px;
                padding-left: 60px;
            }
        }

        /* 标签页样式 */
        .code-example-container {
            position: relative;
            margin: 20px 0;
        }

        .code-tabs {
            display: flex;
            background: var(--bg-tertiary);
            border-radius: 8px 8px 0 0;
            border: 1px solid var(--border-color);
            border-bottom: none;
            overflow: hidden;
        }

        .code-tab {
            background: transparent;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s ease;
            border-right: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .code-tab:last-child {
            border-right: none;
        }

        .code-tab:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .code-tab.active {
            background: var(--bg-primary);
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            position: relative;
        }

        .code-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 1px;
            background: var(--bg-primary);
        }

        .code-content {
            display: none;
        }

        .code-content.active {
            display: block;
        }

        .code-content .code-block {
            border-radius: 0 0 8px 8px;
            margin: 0;
        }

        /* 强制修复所有内容的缩进问题 */
        .content-section {
            margin-left: 0 !important;
            padding-left: 0 !important;
        }

        .content-section .section {
            margin-left: 0 !important;
            padding-left: 0 !important;
        }

        .content-section .section > * {
            margin-left: 0 !important;
            padding-left: 0 !important;
        }

        /* 特别针对问题元素 */
        .content-section table,
        .content-section .code-block,
        .content-section .alert,
        .content-section .api-endpoint,
        .content-section h2,
        .content-section h3,
        .content-section p,
        .content-section div {
            margin-left: 0 !important;
            padding-left: 0 !important;
        }

        /* 恢复必要的内边距 */
        .content-section table th,
        .content-section table td {
            padding: 12px 16px !important;
        }

        .content-section .code-block {
            padding: 20px !important;
        }

        .content-section .alert {
            padding: 16px 20px !important;
        }

        .content-section .api-endpoint {
            padding: 20px !important;
        }

        .content-section ul,
        .content-section ol {
            padding-left: 20px !important;
        }

        /* 打印样式 */
        @media print {
            body {
                background: white;
                color: black;
            }

            .nav-tabs,
            .copy-btn {
                display: none;
            }

            .tab-content {
                display: block !important;
                background: white;
                border: none;
                box-shadow: none;
            }
        }
        /* 密码保护登录界面样式 */
        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f3f9ff 0%, #e1f5fe 25%, #b3e5fc 50%, #e0f2f1 75%, #e8f5e8 100%);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .auth-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .auth-container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .auth-container h2 {
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .auth-container p {
            color: var(--text-secondary);
            margin-bottom: 24px;
            font-size: 0.9rem;
        }

        .auth-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            margin-bottom: 20px;
            transition: border-color 0.2s ease;
            box-sizing: border-box;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .auth-button {
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .auth-button:hover {
            background: var(--primary-hover);
        }

        .auth-error {
            color: var(--accent-color);
            font-size: 0.875rem;
            margin-top: 12px;
            display: none;
        }

        .auth-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 1.5rem;
        }


    </style>
</head>
<body>
    <!-- 密码保护登录界面 -->
    <div class="auth-overlay" id="authOverlay">
        <div class="auth-container">
            <div class="auth-icon">
                <i class="fas fa-lock"></i>
            </div>
            <h2>访问验证</h2>
            <p>请输入访问密码以查看 API 文档</p>
            <input type="password" class="auth-input" id="passwordInput" placeholder="请输入访问密码" />
            <button class="auth-button" onclick="checkPassword()">验证访问</button>
            <div class="auth-error" id="authError">密码错误，请重试</div>
        </div>
    </div>
    <div class="app-layout">
        <!-- 移动端菜单按钮 -->
        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </button>

        <!-- 左侧边栏 -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-rocket"></i> 支付网关API</h1>
                <p>支付接口文档</p>
                <span class="version-badge">
                    <i class="fas fa-code-branch"></i>
                    v2.0.1
                </span>
            </div>

            <nav class="nav-menu">
                <button class="nav-item active" onclick="showSection('overview')">
                    <i class="fas fa-chart-line"></i> 接口概述
                </button>
                <button class="nav-item" onclick="showSection('auth')">
                    <i class="fas fa-shield-alt"></i> 接口认证
                </button>
                <button class="nav-item" onclick="showSection('currency')">
                    <i class="fas fa-coins"></i> 货币代码
                </button>
                <button class="nav-item" onclick="showSection('collection')">
                    <i class="fas fa-download"></i> 代收接口
                </button>
                <div class="nav-item-parent" id="transfer-parent">
                    <button class="nav-item" onclick="toggleNavSubmenu('transfer-parent'); showSection('transfer');">
                        <i class="fas fa-upload"></i> 代付接口
                        <i class="fas fa-chevron-down nav-item-toggle"></i>
                    </button>
                    <div class="nav-submenu">
                        <button class="nav-item" onclick="showSection('extra-params')">
                            <i class="fas fa-user"></i> 收款人信息
                        </button>
                    </div>
                </div>
                <button class="nav-item" onclick="showSection('order-query')">
                    <i class="fas fa-search"></i> 订单查询
                </button>
                <button class="nav-item" onclick="showSection('balance-query')">
                    <i class="fas fa-wallet"></i> 余额查询
                </button>
                <button class="nav-item" onclick="showSection('collection-callback')">
                    <i class="fas fa-bell"></i> 代收回调
                </button>
                <button class="nav-item" onclick="showSection('transfer-callback')">
                    <i class="fas fa-bell-slash"></i> 代付回调
                </button>
                <button class="nav-item" onclick="showSection('order-receipt')">
                    <i class="fas fa-receipt"></i> 订单凭证
                </button>
                <button class="nav-item" onclick="showSection('examples')">
                    <i class="fas fa-terminal"></i> 示例代码
                </button>
            </nav>
        </div>

        <!-- 主内容区域 -->
        <div class="main-content">
            <div class="content-wrapper">
                <div class="content-header">
                    <h1 id="content-title">接口概述</h1>
                </div>

                <div class="content-body">

                <!-- 内容区域 -->
                    <div id="overview" class="content-section active">
                        <div class="section">
                            <h2><i class="fas fa-rocket"></i> 接口概述</h2>
                            <div class="alert alert-info">
                                <strong><i class="fas fa-info-circle"></i> 欢迎使用支付网关API！</strong>
                                本文档提供了完整的支付网关集成指南，包括代收、代付、查询接口和回调通知等功能。
                            </div>

                            <h3><i class="fas fa-globe"></i> 接口域名</h3>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">
                                    <i class="fas fa-copy"></i> 复制
                                </button>
                                <code>
# 生产环境
https://api.paymentgateway.com

# 测试环境
https://sandbox-api.paymentgateway.com
                                </code>
                            </div>

                            <h3><i class="fas fa-cogs"></i> 技术规范</h3>
                            <ul style="margin: 16px 0; padding-left: 20px; color: var(--text-secondary);">
                                <li><strong>协议：</strong> HTTPS/TLS 1.1</li>
                                <li><strong>编码：</strong> UTF-8</li>
                                <li><strong>数据格式：</strong> JSON</li>
                                <li><strong>签名算法：</strong> MD5</li>
                                <li><strong>超时时间：</strong> 30秒</li>
                                <li><strong>频率限制：</strong> 1000次/分钟</li>
                            </ul>

                            <h3><i class="fas fa-sitemap"></i> 接口列表</h3>
                            <table class="param-table">
                                <thead>
                                    <tr>
                                        <th><i class="fas fa-tag"></i> 接口名称</th>
                                        <th><i class="fas fa-exchange-alt"></i> 请求方式</th>
                                        <th><i class="fas fa-link"></i> 接口地址</th>
                                        <th><i class="fas fa-info"></i> 功能说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>代收下单</strong></td>
                                        <td><span class="method post">POST</span></td>
                                        <td><code>/pay/unifiedOrder</code></td>
                                        <td>创建代收订单</td>
                                    </tr>
                                    <tr>
                                        <td><strong>代付下单</strong></td>
                                        <td><span class="method post">POST</span></td>
                                        <td><code>/repay/unifiedOrder</code></td>
                                        <td>创建代付订单</td>
                                    </tr>
                                    <tr>
                                        <td><strong>代收订单查询</strong></td>
                                        <td><span class="method post">POST</span></td>
                                        <td><code>/pay/query</code></td>
                                        <td>查询订单状态</td>
                                    </tr>
                                    <tr>
                                        <td><strong>代付订单查询</strong></td>
                                        <td><span class="method post">POST</span></td>
                                        <td><code>/repay/query</code></td>
                                        <td>查询订单状态</td>
                                    </tr>
                                    <tr>
                                        <td><strong>余额查询</strong></td>
                                        <td><span class="method post">POST</span></td>
                                        <td><code>/query/balance</code></td>
                                        <td>查询商户余额</td>
                                    </tr>
                                </tbody>
                            </table>

                            <h3><i class="fas fa-info-circle"></i> 服务水平</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin: 20px 0;">
                                <div style="background: var(--bg-secondary); padding: 16px; border-radius: 6px; border: 1px solid var(--border-color); text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 600; color: var(--success-color); margin-bottom: 4px;">99.9%</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">可用性保障</div>
                                </div>
                                <div style="background: var(--bg-secondary); padding: 16px; border-radius: 6px; border: 1px solid var(--border-color); text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-bottom: 4px;">&lt;200ms</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">响应时间</div>
                                </div>
                                <div style="background: var(--bg-secondary); padding: 16px; border-radius: 6px; border: 1px solid var(--border-color); text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 600; color: var(--info-color); margin-bottom: 4px;">24/7</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">技术支持</div>
                                </div>
                                <div style="background: var(--bg-secondary); padding: 16px; border-radius: 6px; border: 1px solid var(--border-color); text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 600; color: var(--warning-color); margin-bottom: 4px;">150+</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">覆盖国家</div>
                                </div>
                            </div>
                        </div>
            </div>
                </div>

                <div id="collection" class="content-section">
            <div class="section">
                <h2><i class="fas fa-arrow-down"></i> 代收接口</h2>

                <div class="api-endpoint">
                    <h3><span class="method post">POST</span> /pay/unifiedOrder</h3>
                    <p>创建代收订单，用户支付后资金进入商户账户</p>
                </div>

                <h3><i class="fas fa-list"></i> 请求参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>必填</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>merchant_id</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户号</td>
                            <td>M2501082278</td>
                        </tr>
                        <tr>
                            <td>amount</td>
                            <td>Float</td>
                            <td><span class="required">是</span></td>
                            <td>订单金额</td>
                            <td>100</td>
                        </tr>
                        <tr>
                            <td>currency</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>货币类型</td>
                            <td>BRL</td>
                        </tr>
                        <tr>
                            <td>channel_code</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>支付通道编码</td>
                            <td>bax</td>
                        </tr>
                        <tr>
                            <td>notify_url</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>异步通知地址</td>
                            <td>http://apis.nrny.com/index/test/notify</td>
                        </tr>
                        <tr>
                            <td>return_url</td>
                            <td>String</td>
                            <td><span class="optional">否</span></td>
                            <td>同步跳转地址</td>
                            <td>http://apis.nrny.com/index/test/callbk</td>
                        </tr>
                        <tr>
                            <td>subject</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商品描述</td>
                            <td>测试商品</td>
                        </tr>
                        <tr>
                            <td>merchant_order_no</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户订单号，唯一</td>
                            <td>TEST1755704243488</td>
                        </tr>
                        <tr>
                            <td>timestamp</td>
                            <td>Integer</td>
                            <td><span class="required">是</span></td>
                            <td>时间戳</td>
                            <td>1755704243</td>
                        </tr>
                        <tr>
                            <td>sign_type</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名类型</td>
                            <td>md5</td>
                        </tr>
                        <tr>
                            <td>sign</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名</td>
                            <td>A1B2C3D4E5F6G7H8I9J0K1L2M3N4O5P6</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-code"></i> 请求示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>POST /pay/unifiedOrder HTTP/1.1
Host: api.yourpay.com
Content-Type: application/json

{
    "merchant_id": "M2501082278",
    "amount": 100,
    "currency": "BRL",
    "channel_code": "bax",
    "notify_url": "http://apis.nrny.com/index/test/notify",
    "return_url": "http://apis.nrny.com/index/test/callbk",
    "subject": "测试商品",
    "merchant_order_no": "TEST1755704243488",
    "timestamp": 1755704243,
    "sign_type": "md5",
    "sign": "A1B2C3D4E5F6G7H8I9J0K1L2M3N4O5P6"
}</code>
                </div>

                <h3><i class="fas fa-check-circle"></i> 响应参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>code</td>
                            <td>Integer</td>
                            <td>状态码，1表示成功</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>msg</td>
                            <td>String</td>
                            <td>返回信息</td>
                            <td>支付创建成功</td>
                        </tr>
                        <tr>
                            <td>data</td>
                            <td>Object</td>
                            <td>返回数据</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>data.order_no</td>
                            <td>String</td>
                            <td>系统订单号</td>
                            <td>P20250820233733457d605ef</td>
                        </tr>
                        <tr>
                            <td>data.trade_no</td>
                            <td>String</td>
                            <td>商户订单号</td>
                            <td>TEST1755704243488</td>
                        </tr>
                        <tr>
                            <td>data.amount</td>
                            <td>Integer</td>
                            <td>订单金额</td>
                            <td>100</td>
                        </tr>
                        <tr>
                            <td>data.pay_data_type</td>
                            <td>Integer</td>
                            <td>支付数据类型</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td>data.pay_url</td>
                            <td>String</td>
                            <td>支付链接</td>
                            <td>http://localhost:3002/payment/lNKN6IRm...</td>
                        </tr>
                        <tr>
                            <td>data.qrcode_url</td>
                            <td>String</td>
                            <td>二维码链接</td>
                            <td>""</td>
                        </tr>
                        <tr>
                            <td>time</td>
                            <td>Integer</td>
                            <td>响应时间戳</td>
                            <td>1755704254</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-reply"></i> 响应示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>{
    "code": 1,
    "msg": "支付创建成功",
    "data": {
        "order_no": "P20250820233733457d605ef",
        "trade_no": "TEST1755704243488",
        "amount": 100,
        "pay_data_type": 0,
        "pay_url": "http://localhost:3002/payment/lNKN6IRmOeuZPUYg-JPnV__4FTvxgiYbnrH-kemtWRfNJOGthj3f4iUcpgqXfbVfe8ERRquRKO9I32lRaiffpqZa5fSF51bx_vhOpJ-DNwKH7OzGAdEAbMTYvqvGTGfSSmdQeueiR0CL8GcU5ha52jHuCUXx2K70IYC1NU6CCLp14Sf67BBUjZBdzgJtnwpvpIdhcML8NKs0W8s5AdNB8Q",
        "qrcode_url": ""
    },
    "time": 1755704254
}</code>
                </div>
                <h3><i class="fas fa-info-circle"></i> 收订单状态说明</h3>
                <table class="param-table">
                    <thead>
                    <tr>
                        <th>状态值</th>
                        <th>状态名称</th>
                        <th>说明</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><code>0</code></td>
                        <td>待支付</td>
                        <td>订单已创建，等待用户支付</td>
                    </tr>
                    <tr>
                        <td><code>1</code></td>
                        <td>支付中</td>
                        <td>用户已发起支付，系统处理中</td>
                    </tr>
                    <tr>
                        <td><code>2</code></td>
                        <td>成功</td>
                        <td>支付成功，资金已到账</td>
                    </tr>
                    <tr>
                        <td><code>-1</code></td>
                        <td>失败</td>
                        <td>代付失败</td>
                    </tr>
                    <tr>
                        <td><code>-2</code></td>
                        <td>已取消</td>
                        <td>订单已取消</td>
                    </tr>
                    </tbody>
                </table>
            </div>
                </div>

                    <div id="transfer" class="content-section">
                        <div class="section">
                            <h2><i class="fas fa-arrow-up"></i> 代付接口</h2>

                            <div class="api-endpoint">
                                <h3><span class="method post">POST</span> /repay/unifiedOrder</h3>
                                <p>创建代付订单，从商户账户向指定账户转账</p>
                            </div>

                            <div class="alert alert-warning">
                                <strong>重要提醒：</strong> 代付接口会直接从您的账户扣款，请确保接收方信息准确无误。
                            </div>

                            <h3><i class="fas fa-list"></i> 请求参数</h3>
                            <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>必填</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>merchant_id</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户号</td>
                            <td>10001</td>
                        </tr>
                        <tr>
                            <td>amount</td>
                            <td>Decimal</td>
                            <td><span class="required">是</span></td>
                            <td>代付金额，保留2位小数</td>
                            <td>100.00</td>
                        </tr>
                        <tr>
                            <td>currency</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>货币类型</td>
                            <td>BRL</td>
                        </tr>
                        <tr>
                            <td>channel_code</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>代付通道编码</td>
                            <td>pix_transfer</td>
                        </tr>
                        <tr>
                            <td>merchant_order_no</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户订单号，唯一</td>
                            <td>TRANSFER20240101001</td>
                        </tr>
                        <tr>
                            <td>notify_url</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>异步通知地址</td>
                            <td>https://your-site.com/transfer-notify</td>
                        </tr>
                        <tr>
                            <td>subject</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>代付说明</td>
                            <td>佣金发放</td>
                        </tr>
                        <tr>
                            <td>extra_params</td>
                            <td>Object</td>
                            <td><span class="required">是</span></td>
                            <td>收款人信息 <a href="javascript:void(0)" onclick="toggleCollapsible('extra-params-collapse')" style="color: var(--primary-color); font-size: 0.875rem;">(点击查看详情)</a></td>
                            <td>见下方</td>
                        </tr>
                        <tr>
                            <td>timestamp</td>
                            <td>Integer</td>
                            <td><span class="required">是</span></td>
                            <td>时间戳</td>
                            <td>1640995200</td>
                        </tr>
                        <tr>
                            <td>sign_type</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名类型</td>
                            <td>md5</td>
                        </tr>
                        <tr>
                            <td>sign</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名</td>
                            <td>A1B2C3D4...</td>
                        </tr>
                    </tbody>
                </table>

                <!-- 可折叠的 extra_params 详细说明 -->
                <div id="extra-params-collapse" class="collapsible-section">
                    <div class="collapsible-header" onclick="toggleCollapsible('extra-params-collapse')">
                        <h3>
                            <i class="fas fa-user"></i>
                            extra_params 收款人信息详细说明
                        </h3>
                        <i class="fas fa-chevron-down collapsible-icon"></i>
                    </div>
                    <div class="collapsible-content">
                        <div class="collapsible-body">
                            <div class="alert alert-info">
                                <strong><i class="fas fa-info-circle"></i> 说明：</strong>
                                <code>extra_params</code> 是一个JSON对象,用于存储收款人信息。
                                <br><br>
                                <strong><i class="fas fa-book"></i> 详细说明：</strong>
                                关于 extra_params 的完整参数说明、不同国家/地区的字段要求,请查看
                                <a href="javascript:void(0)" onclick="showSection('extra-params')" style="color: #0969da; text-decoration: underline;">
                                    <strong>收款人信息</strong>
                                </a> 章节。
                            </div>

                            <h4><i class="fas fa-code"></i> 快速示例</h4>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                                <code>// 巴西PIX
{
    "name": "João Silva",
    "CPF": "12345678901"
}

// 吉尔吉斯斯坦
{
    "name": "Aibek Asanov",
    "bankaccount": "12345678901",
    "bankname": "Optima Bank"
}</code>
                            </div>
                        </div>
                    </div>
                </div>

                <h3><i class="fas fa-code"></i> 请求示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>POST /repay/unifiedOrder HTTP/1.1
Host: api.yourpay.com
Content-Type: application/json

{
    "merchant_id": "10001",
    "amount": "100.00",
    "currency": "BRL",
    "channel_code": "pix_transfer",
    "merchant_order_no": "TRANSFER20240101001",
    "notify_url": "https://your-site.com/transfer-notify",
    "subject": "佣金发放",
    "extra_params": {
        "name": "João Silva",
        "CPF": "12345678901",
        "phone": "+5511999999999",
        "email": "joao@example.com"
    },
    "timestamp": 1640995200,
    "sign_type": "md5",
    "sign": "C024305218DD3D52C247C630515DC3BB"
}</code>
                </div>

                <div class="alert alert-info">
                    <strong><i class="fas fa-calculator"></i> 签名计算过程：</strong>
                    <div class="code-block" style="margin: 10px 0;">
                        <code>
// 1. 处理数组参数
extra_params = "CPF=12345678901&email=joao@example.com&name=João Silva&phone=+5511999999999"

// 2. 构建签名字符串（按字母序排序）
signString = "amount=100.00&channel_code=pix_transfer&currency=BRL&extra_params=CPF=12345678901&email=joao@example.com&name=João Silva&phone=+5511999999999&merchant_id=10001&merchant_order_no=TRANSFER20240101001&notify_url=https://your-site.com/transfer-notify&sign_type=md5&subject=佣金发放&timestamp=1640995200&key=YOUR_SECRET_KEY"

// 3. MD5加密并转大写
sign = MD5(signString).toUpperCase()
                        </code>
                    </div>
                </div>

                <h3><i class="fas fa-check-circle"></i> 响应参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>code</td>
                            <td>Integer</td>
                            <td>状态码，1表示成功</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>msg</td>
                            <td>String</td>
                            <td>返回信息</td>
                            <td>success</td>
                        </tr>
                        <tr>
                            <td>data</td>
                            <td>Object</td>
                            <td>返回数据</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td>data.order_no</td>
                            <td>String</td>
                            <td>系统订单号</td>
                            <td>W202509290406012179bfc99</td>
                        </tr>
                        <tr>
                            <td>data.merchant_order_no</td>
                            <td>String</td>
                            <td>商户订单号</td>
                            <td>TEST1759089961685</td>
                        </tr>
                        <tr>
                            <td>data.status</td>
                            <td>Integer</td>
                            <td>订单状态</td>
                            <td>0</td>
                        </tr>
                        <tr>
                            <td>data.status_text</td>
                            <td>String</td>
                            <td>状态描述</td>
                            <td>代付请求已提交，正在处理中</td>
                        </tr>
                        <tr>
                            <td>data.amount</td>
                            <td>Decimal</td>
                            <td>代付金额</td>
                            <td>100</td>
                        </tr>
                        <tr>
                            <td>data.fee</td>
                            <td>Decimal</td>
                            <td>手续费</td>
                            <td>0.2</td>
                        </tr>
                        <tr>
                            <td>data.create_time</td>
                            <td>Integer</td>
                            <td>创建时间戳</td>
                            <td>1759089961</td>
                        </tr>
                        <tr>
                            <td>data.channel_data</td>
                            <td>Array</td>
                            <td>通道数据</td>
                            <td>[]</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-reply"></i> 响应示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>{
    "code": 1,
    "msg": "success",
    "data": {
        "order_no": "W202509290406012179bfc99",
        "merchant_order_no": "TEST1759089961685",
        "status": 0,
        "status_text": "代付请求已提交，正在处理中",
        "amount": 100,
        "fee": 0.2,
        "create_time": 1759089961,
        "channel_data": []
    }
}</code>
                </div>

                <h3><i class="fas fa-info-circle"></i> 代付订单状态说明</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>状态值</th>
                            <th>状态名称</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>0</code></td>
                            <td>待处理</td>
                            <td>订单已创建，等待用户支付</td>
                        </tr>
                        <tr>
                            <td><code>1</code></td>
                            <td>处理中</td>
                            <td>用户已发起代付，系统处理中</td>
                        </tr>
                        <tr>
                            <td><code>3</code></td>
                            <td>成功</td>
                            <td>代付已成功完成</td>
                        </tr>
                        <tr>
                            <td><code>-1</code></td>
                            <td>失败</td>
                            <td>代付失败</td>
                        </tr>
                        <tr>
                            <td><code>-2</code></td>
                            <td>已取消</td>
                            <td>代付订单已取消</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-info">
                    <strong><i class="fas fa-lightbulb"></i> 重要说明：</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li><strong>code字段</strong>：1表示接口调用成功，0或其他值表示失败</li>
                        <li><strong>status字段</strong>：表示代付订单的实际处理状态</li>
                        <li><strong>fee字段</strong>：手续费金额，从代付金额中扣除</li>
                        <li><strong>channel_data字段</strong>：通道返回的额外数据，通常为空数组</li>
                    </ul>
                </div>
            </div>
                </div>

                <div id="order-query" class="content-section">
            <div class="section">
                <h2><i class="fas fa-search"></i> 订单查询</h2>

                <div class="api-endpoint">
                    <h3><span class="method post">POST</span> /pay/query</h3>
                    <p>查询代收订单状态</p>
                </div>

                <h3><i class="fas fa-list"></i> 请求参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>必填</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>merchant_id</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户号</td>
                            <td>10001</td>
                        </tr>
                        <tr>
                            <td>merchant_order_no</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户订单号</td>
                            <td>ORDER20240101001</td>
                        </tr>
                        <tr>
                            <td>timestamp</td>
                            <td>Integer</td>
                            <td><span class="required">是</span></td>
                            <td>时间戳</td>
                            <td>1640995200</td>
                        </tr>
                        <tr>
                            <td>sign_type</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名类型</td>
                            <td>md5</td>
                        </tr>
                        <tr>
                            <td>sign</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名</td>
                            <td>A1B2C3D4...</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-check-circle"></i> 响应参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>code</td>
                            <td>Integer</td>
                            <td>状态码，1表示成功</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>msg</td>
                            <td>String</td>
                            <td>返回信息</td>
                            <td>success</td>
                        </tr>
                        <tr>
                            <td>data.order_no</td>
                            <td>String</td>
                            <td>系统订单号</td>
                            <td>SYS20240101001</td>
                        </tr>
                        <tr>
                            <td>data.merchant_order_no</td>
                            <td>String</td>
                            <td>商户订单号</td>
                            <td>ORDER20240101001</td>
                        </tr>
                        <tr>
                            <td>data.amount</td>
                            <td>Decimal</td>
                            <td>订单金额</td>
                            <td>100.00</td>
                        </tr>
                        <tr>
                            <td>data.status</td>
                            <td>Integer</td>
                            <td>订单状态</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>data.create_time</td>
                            <td>Integer</td>
                            <td>创建时间</td>
                            <td>1640995200</td>
                        </tr>
                        <tr>
                            <td>data.success_time</td>
                            <td>Integer</td>
                            <td>成功时间</td>
                            <td>1640995260</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-info-circle"></i> 订单状态说明</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>状态值</th>
                            <th>状态名称（代收/代付）</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>待支付 / 待处理</td>
                            <td>订单已创建，等待用户支付</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>支付中 / 处理中</td>
                            <td>用户已发起支付，系统处理中</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>已支付</td>
                            <td>支付成功，资金已到账</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>已退款 / 已支付</td>
                            <td>订单已退款</td>
                        </tr>
                        <tr>
                            <td>-1</td>
                            <td>失败 / 失败</td>
                            <td>支付失败</td>
                        </tr>
                        <tr>
                            <td>-2</td>
                            <td>已过期</td>
                            <td>订单已过期</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-code"></i> 代收查询请求示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>POST /pay/query HTTP/1.1
Host: api.yourpay.com
Content-Type: application/json

{
    "merchant_id": "10001",
    "merchant_order_no": "ORDER20240101001",
    "timestamp": 1640995200,
    "sign_type": "md5",
    "sign": "C3D4E5F6G7H8I9J0K1L2M3N4O5P6Q7R8"
}</code>
                </div>

                <h3><i class="fas fa-reply"></i> 代收查询响应示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>{
    "code": 1,
    "msg": "success",
    "data": {
        "order_no": "SYS20240101001",
        "merchant_order_no": "ORDER20240101001",
        "amount": "100.00",
        "status": 2,
        "create_time": 1640995200,
        "success_time": 1640995260
    }
}</code>
                </div>

                <div class="api-endpoint">
                    <h3><span class="method post">POST</span> /repay/query</h3>
                    <p>查询代付订单状态</p>
                </div>

                <h3><i class="fas fa-list"></i> 代付查询请求参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>必填</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>merchant_id</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户号</td>
                            <td>10001</td>
                        </tr>
                        <tr>
                            <td>merchant_order_no</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户订单号</td>
                            <td>TRANSFER20240101001</td>
                        </tr>
                        <tr>
                            <td>timestamp</td>
                            <td>Integer</td>
                            <td><span class="required">是</span></td>
                            <td>时间戳</td>
                            <td>1640995200</td>
                        </tr>
                        <tr>
                            <td>sign_type</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名类型</td>
                            <td>md5</td>
                        </tr>
                        <tr>
                            <td>sign</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名</td>
                            <td>A1B2C3D4...</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-check-circle"></i> 代付查询响应参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>code</td>
                            <td>Integer</td>
                            <td>状态码，1表示成功</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>msg</td>
                            <td>String</td>
                            <td>返回信息</td>
                            <td>success</td>
                        </tr>
                        <tr>
                            <td>data.order_no</td>
                            <td>String</td>
                            <td>系统订单号</td>
                            <td>SYS20240101001</td>
                        </tr>
                        <tr>
                            <td>data.merchant_order_no</td>
                            <td>String</td>
                            <td>商户订单号</td>
                            <td>ORDER20240101001</td>
                        </tr>
                        <tr>
                            <td>data.amount</td>
                            <td>Decimal</td>
                            <td>订单金额</td>
                            <td>100.00</td>
                        </tr>
                        <tr>
                            <td>data.status</td>
                            <td>Integer</td>
                            <td>订单状态</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>data.create_time</td>
                            <td>Integer</td>
                            <td>创建时间</td>
                            <td>1640995200</td>
                        </tr>
                        <tr>
                            <td>data.success_time</td>
                            <td>Integer</td>
                            <td>成功时间</td>
                            <td>1640995260</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-code"></i> 代付查询请求示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>POST /repay/query HTTP/1.1
Host: api.yourpay.com
Content-Type: application/json

{
    "merchant_id": "10001",
    "merchant_order_no": "TRANSFER20240101001",
    "timestamp": 1640995200,
    "sign_type": "md5",
    "sign": "D4E5F6G7H8I9J0K1L2M3N4O5P6Q7R8S9"
}</code>
                </div>

                <h3><i class="fas fa-reply"></i> 代付查询响应示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>{
    "code": 1,
    "msg": "success",
    "data": {
         "order_no": "SYS20240101001",
         "merchant_order_no": "ORDER20240101001",
         "amount": "100.00",
         "status": 3,
         "create_time": 1640995200,
         "success_time": 1640995260
   }
}</code>
                </div>
            </div>
                </div>

                <div id="balance-query" class="content-section">
            <div class="section">
                <h2><i class="fas fa-wallet"></i> 余额查询</h2>

                <div class="api-endpoint">
                    <h3><span class="method post">POST</span> /query/balance</h3>
                    <p>查询商户账户余额</p>
                </div>

                <h3><i class="fas fa-list"></i> 请求参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>必填</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>merchant_id</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户号</td>
                            <td>10001</td>
                        </tr>
                        <tr>
                            <td>timestamp</td>
                            <td>Integer</td>
                            <td><span class="required">是</span></td>
                            <td>时间戳</td>
                            <td>1640995200</td>
                        </tr>
                        <tr>
                            <td>sign_type</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名类型</td>
                            <td>md5</td>
                        </tr>
                        <tr>
                            <td>sign</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名</td>
                            <td>A1B2C3D4...</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-code"></i> 余额查询请求示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>POST /query/balance HTTP/1.1
Host: api.yourpay.com
Content-Type: application/json

{
    "merchant_id": "10001",
    "timestamp": 1640995200,
    "sign_type": "md5",
    "sign": "D4E5F6G7H8I9J0K1L2M3N4O5P6Q7R8S9"
}</code>
                </div>

                <h3><i class="fas fa-check-circle"></i> 余额查询响应参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>code</td>
                            <td>Integer</td>
                            <td>状态码，1表示成功</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>msg</td>
                            <td>String</td>
                            <td>返回信息</td>
                            <td>success</td>
                        </tr>
                        <tr>
                            <td>data.balance</td>
                            <td>Decimal</td>
                            <td>账户余额</td>
                            <td>9999.99</td>
                        </tr>
                        <tr>
                            <td>data.currency</td>
                            <td>String</td>
                            <td>货币类型</td>
                            <td>BRL</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-reply"></i> 余额查询响应示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>{
    "code": 1,
    "msg": "success",
    "data": {
        "balance": "9999.99",
        "currency": "BRL"
    }
}</code>
                </div>
            </div>
                </div>

                <div id="collection-callback" class="content-section">
            <div class="section">
                <h2><i class="fas fa-bell"></i> 代收回调通知</h2>

                <div class="alert alert-info">
                    <strong>重要说明：</strong> 当代收订单状态发生变化时，系统会向您提供的notify_url发送异步通知。
                </div>

                <h3><i class="fas fa-cogs"></i> 通知机制</h3>
                <ul style="margin: 20px 0; padding-left: 30px;">
                    <li><strong>通知方式：</strong>HTTP POST请求</li>
                    <li><strong>数据格式：</strong>JSON</li>
                    <li><strong>重试机制：</strong>失败后会重试，间隔时间递增</li>
                    <li><strong>超时时间：</strong>30秒</li>
                    <li><strong>成功标识：</strong>返回字符串"success"</li>
                </ul>

                <h3><i class="fas fa-list"></i> 通知参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>merchant_id</td>
                            <td>String</td>
                            <td>商户号</td>
                            <td>M2501082278</td>
                        </tr>
                        <tr>
                            <td>order_no</td>
                            <td>String</td>
                            <td>系统订单号</td>
                            <td>P202508190323213489c6b6b</td>
                        </tr>
                        <tr>
                            <td>merchant_order_no</td>
                            <td>String</td>
                            <td>商户订单号</td>
                            <td>TEST1755544994315</td>
                        </tr>
                        <tr>
                            <td>amount</td>
                            <td>String</td>
                            <td>订单金额</td>
                            <td>100.00</td>
                        </tr>
                        <tr>
                            <td>real_amount</td>
                            <td>String</td>
                            <td>实际到账金额</td>
                            <td>100.00</td>
                        </tr>
                        <tr>
                            <td>status</td>
                            <td>String</td>
                            <td>订单状态 成功=2，失败=-1</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>pay_time</td>
                            <td>String</td>
                            <td>支付完成时间</td>
                            <td>1755555448</td>
                        </tr>
                        <tr>
                            <td>timestamp</td>
                            <td>String</td>
                            <td>通知时间戳</td>
                            <td>1755555448</td>
                        </tr>
                        <tr>
                            <td>sign</td>
                            <td>String</td>
                            <td>签名</td>
                            <td>B8536FFC8A20EF2848E6395FA4D142C3</td>
                        </tr>
                    </tbody>
                </table>
                <h3><i class="fas fa-info-circle"></i> 收订单状态说明</h3>
                <table class="param-table">
                    <thead>
                    <tr>
                        <th>状态值</th>
                        <th>状态名称</th>
                        <th>说明</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><code>2</code></td>
                        <td>成功</td>
                        <td>支付成功，资金已到账</td>
                    </tr>
                    <tr>
                        <td><code>-1</code></td>
                        <td>失败</td>
                        <td>代付失败</td>
                    </tr>
                    <tr>
                        <td><code>-2</code></td>
                        <td>已取消</td>
                        <td>订单已取消</td>
                    </tr>
                    </tbody>
                </table>
                <h3><i class="fas fa-code"></i> 通知示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>POST /your-notify-url HTTP/1.1
Host: your-site.com
Content-Type: application/json

{
    "merchant_id": "M2501082278",
    "order_no": "P202508190323213489c6b6b",
    "merchant_order_no": "TEST1755544994315",
    "amount": "100.00",
    "real_amount": "100.00",
    "status": "2",
    "pay_time": "1755555448",
    "timestamp": "1755555448",
    "sign": "B8536FFC8A20EF2848E6395FA4D142C3"
}</code>
                </div>

                <h3><i class="fas fa-shield-alt"></i> 签名验证</h3>
                <p>收到通知后，请务必验证签名确保数据安全：</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>// PHP示例
function verifySign($params, $secret) {
    $sign = $params['sign'];
    unset($params['sign']);

    ksort($params);
    $string = '';
    foreach ($params as $key => $value) {
        $string .= $key . '=' . $value . '&';
    }
    $string .= 'key=' . $secret;

    return strtoupper(md5($string)) === $sign;
}</code>
                </div>

                <h3><i class="fas fa-reply"></i> 响应要求</h3>
                <div class="alert alert-warning">
                    <strong>重要：</strong> 收到通知后，请返回字符串"success"表示处理成功，否则系统会认为通知失败并重试。
                </div>
            </div>
                </div>

                <div id="transfer-callback" class="content-section">
            <div class="section">
                <h2><i class="fas fa-bell-slash"></i> 代付回调通知</h2>

                <div class="alert alert-info">
                    <strong>重要说明：</strong> 当代付订单状态发生变化时，系统会向您提供的notify_url发送异步通知。
                </div>

                <h3><i class="fas fa-cogs"></i> 通知机制</h3>
                <ul style="margin: 20px 0; padding-left: 30px;">
                    <li><strong>通知方式：</strong>HTTP POST请求</li>
                    <li><strong>数据格式：</strong>JSON</li>
                    <li><strong>重试机制：</strong>失败后会重试，间隔时间递增</li>
                    <li><strong>超时时间：</strong>30秒</li>
                    <li><strong>成功标识：</strong>返回字符串"success"</li>
                </ul>

                <h3><i class="fas fa-list"></i> 通知参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>merchant_id</td>
                            <td>String</td>
                            <td>商户号</td>
                            <td>M2501082278</td>
                        </tr>
                        <tr>
                            <td>order_no</td>
                            <td>String</td>
                            <td>系统订单号</td>
                            <td>W202508150547031407128ce</td>
                        </tr>
                        <tr>
                            <td>merchant_order_no</td>
                            <td>String</td>
                            <td>商户订单号</td>
                            <td>TEST1755208021953</td>
                        </tr>
                        <tr>
                            <td>amount</td>
                            <td>Decimal</td>
                            <td>代付金额</td>
                            <td>100</td>
                        </tr>
                        <tr>
                            <td>real_amount</td>
                            <td>Decimal</td>
                            <td>实际到账金额（amount - fee）</td>
                            <td>99.8</td>
                        </tr>
                        <tr>
                            <td>status</td>
                            <td>Integer</td>
                            <td>订单状态：1=成功，-1=失败</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>pay_time</td>
                            <td>Integer</td>
                            <td>代付完成时间戳</td>
                            <td>1759089980</td>
                        </tr>
                        <tr>
                            <td>timestamp</td>
                            <td>String</td>
                            <td>通知时间戳</td>
                            <td>1755225829</td>
                        </tr>
                        <tr>
                            <td>fail_msg</td>
                            <td>String</td>
                            <td>失败原因</td>
                            <td>error，以结果为准</td>
                        </tr>
                        <tr>
                            <td>sign</td>
                            <td>String</td>
                            <td>签名</td>
                            <td>A40F6622E8391B34E63E7962FD465315</td>
                        </tr>
                    </tbody>
                </table>
                <h3><i class="fas fa-info-circle"></i> 代付订单状态说明</h3>
                <table class="param-table">
                    <thead>
                    <tr>
                        <th>状态值</th>
                        <th>状态名称</th>
                        <th>说明</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><code>3</code></td>
                        <td>成功</td>
                        <td>代付已成功完成</td>
                    </tr>
                    <tr>
                        <td><code>-1</code></td>
                        <td>失败</td>
                        <td>代付失败</td>
                    </tr>
                    <tr>
                        <td><code>-2</code></td>
                        <td>已取消</td>
                        <td>代付订单已取消</td>
                    </tr>
                    </tbody>
                </table>
                <h3><i class="fas fa-code"></i> 通知示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>POST /your-transfer-notify-url HTTP/1.1
Host: your-site.com
Content-Type: application/json

{
    "merchant_id": "10001",
    "order_no": "W202509290406012179bfc99",
    "merchant_order_no": "TEST1759089961685",
    "amount": 100,
    "real_amount": 99.8,
    "status": 1,
    "pay_time": 1759089980,
    "timestamp": 1759089980,
    "sign": "A40F6622E8391B34E63E7962FD465315"
}</code>
                </div>

                <h3><i class="fas fa-shield-alt"></i> 签名验证</h3>
                <p>收到通知后，请务必验证签名确保数据安全：</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>// PHP示例
function verifySign($params, $secret) {
    $sign = $params['sign'];
    unset($params['sign']);

    ksort($params);
    $string = '';
    foreach ($params as $key => $value) {
        $string .= $key . '=' . $value . '&';
    }
    $string .= 'key=' . $secret;

    return strtoupper(md5($string)) === $sign;
}</code>
                </div>

                <h3><i class="fas fa-reply"></i> 响应要求</h3>
                <div class="alert alert-warning">
                    <strong>重要：</strong> 收到通知后，请返回字符串"success"表示处理成功，否则系统会认为通知失败并重试。
                </div>
            </div>
                </div>

                <div id="order-receipt" class="content-section">
            <div class="section">
                <h2><i class="fas fa-receipt"></i> 订单凭证</h2>

                <div class="alert alert-info">
                    <strong>功能说明：</strong> 提供订单凭证查询和下载功能，支持PDF格式的交易凭证。
                </div>

                <div class="api-endpoint">
                    <h3><span class="method post">POST</span> /receipt/query</h3>
                    <p>查询订单凭证信息</p>
                </div>

                <h3><i class="fas fa-list"></i> 请求参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>必填</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>merchant_id</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>商户号</td>
                            <td>10001</td>
                        </tr>
                        <tr>
                            <td>order_no</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>系统订单号</td>
                            <td>SYS20240101001</td>
                        </tr>
                        <tr>
                            <td>timestamp</td>
                            <td>Integer</td>
                            <td><span class="required">是</span></td>
                            <td>时间戳</td>
                            <td>1640995200</td>
                        </tr>
                        <tr>
                            <td>sign</td>
                            <td>String</td>
                            <td><span class="required">是</span></td>
                            <td>签名</td>
                            <td>A1B2C3D4...</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-code"></i> 请求示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>POST /receipt/query HTTP/1.1
Host: api.yourpay.com
Content-Type: application/json

{
    "merchant_id": "10001",
    "order_no": "SYS20240101001",
    "timestamp": 1640995200,
    "sign": "E5F6G7H8I9J0K1L2M3N4O5P6Q7R8S9T0"
}</code>
                </div>

                <h3><i class="fas fa-check-circle"></i> 响应参数</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>参数名</th>
                            <th>类型</th>
                            <th>说明</th>
                            <th>示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>code</td>
                            <td>Integer</td>
                            <td>状态码，1表示成功</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>msg</td>
                            <td>String</td>
                            <td>返回信息</td>
                            <td>success</td>
                        </tr>
                        <tr>
                            <td>data.receipt_url</td>
                            <td>String</td>
                            <td>凭证下载链接</td>
                            <td>https://api.yourpay.com/receipt/download/xxx</td>
                        </tr>
                        <tr>
                            <td>data.receipt_status</td>
                            <td>String</td>
                            <td>凭证状态</td>
                            <td>available</td>
                        </tr>
                        <tr>
                            <td>data.expire_time</td>
                            <td>Integer</td>
                            <td>链接过期时间</td>
                            <td>1641081600</td>
                        </tr>
                    </tbody>
                </table>

                <h3><i class="fas fa-reply"></i> 响应示例</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                    <code>{
    "code": 1,
    "msg": "success",
    "data": {
        "receipt_url": "https://api.yourpay.com/receipt/download/abc123def456",
        "receipt_status": "available",
        "expire_time": 1641081600
    }
}</code>
                </div>

                <h3><i class="fas fa-info-circle"></i> 凭证状态说明</h3>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>状态值</th>
                            <th>状态名称</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>available</td>
                            <td>可用</td>
                            <td>凭证已生成，可以下载</td>
                        </tr>
                        <tr>
                            <td>generating</td>
                            <td>生成中</td>
                            <td>凭证正在生成，请稍后查询</td>
                        </tr>
                        <tr>
                            <td>unavailable</td>
                            <td>不可用</td>
                            <td>订单状态不支持生成凭证</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <strong>注意事项：</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>只有已支付成功的订单才能生成凭证</li>
                        <li>凭证下载链接有效期为24小时</li>
                        <li>凭证为PDF格式，包含完整的交易信息</li>
                        <li>每个订单的凭证只能生成一次</li>
                    </ul>
                </div>
            </div>
                </div>

                <div id="examples" class="content-section">
            <div class="section">
                <h2><i class="fas fa-code"></i> 示例代码</h2>

                <div class="code-example-container">
                    <div class="code-tabs">
                        <button class="code-tab active" onclick="switchCodeTab(this, 'examples-php')">
                            <i class="fab fa-php"></i> PHP
                        </button>
                        <button class="code-tab" onclick="switchCodeTab(this, 'examples-java')">
                            <i class="fab fa-java"></i> Java
                        </button>
                        <button class="code-tab" onclick="switchCodeTab(this, 'examples-js')">
                            <i class="fab fa-js"></i> JavaScript
                        </button>
                    </div>

                    <div id="examples-php" class="code-content active">
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                            <code>&lt;?php
class PaymentAPI {
    private $merchantId;
    private $secretKey;
    private $apiUrl;

    public function __construct($merchantId, $secretKey, $apiUrl) {
        $this->merchantId = $merchantId;
        $this->secretKey = $secretKey;
        $this->apiUrl = $apiUrl;
    }

    // 生成签名（支持数组参数）
    private function generateSign($params) {
        // 移除sign字段
        unset($params['sign']);

        // 处理数组参数
        foreach ($params as $key => $value) {
            if (is_array($value)) {
                ksort($value);
                $arr = [];
                foreach ($value as $ak => $av) {
                    if ($av !== '' && $av !== null) $arr[] = "$ak=$av";
                }
                $params[$key] = implode('&', $arr);
            }
        }

        // 排序并过滤空值
        ksort($params);
        $params = array_filter($params, function($v) {
            return $v !== '' && $v !== null;
        });

        // 构建签名字符串
        $pairs = [];
        foreach ($params as $k => $v) $pairs[] = "$k=$v";
        $signStr = implode('&', $pairs) . "&key=" . $this->secretKey;

        return strtoupper(md5($signStr));
    }

    // 代收下单
    public function createPayOrder($amount, $channelCode, $merchantOrderNo, $notifyUrl, $subject) {
        $params = [
            'merchant_id' => $this->merchantId,
            'amount' => number_format($amount, 2, '.', ''),
            'currency' => 'BRL',
            'channel_code' => $channelCode,
            'merchant_order_no' => $merchantOrderNo,
            'notify_url' => $notifyUrl,
            'subject' => $subject,
            'timestamp' => time()
        ];

        $params['sign'] = $this->generateSign($params);

        return $this->httpPost('/pay/unifiedOrder', $params);
    }

    // 代付下单
    public function createTransferOrder($amount, $channelCode, $merchantOrderNo, $notifyUrl, $subject, $extraParams) {
        $params = [
            'merchant_id' => $this->merchantId,
            'amount' => number_format($amount, 2, '.', ''),
            'currency' => 'BRL',
            'channel_code' => $channelCode,
            'merchant_order_no' => $merchantOrderNo,
            'notify_url' => $notifyUrl,
            'subject' => $subject,
            'extra_params' => $extraParams,  // 数组参数，会被自动处理
            'timestamp' => time(),
            'sign_type' => 'md5'  // 签名类型
        ];

        $params['sign'] = $this->generateSign($params);

        return $this->httpPost('/repay/unifiedOrder', $params);
    }


    // HTTP请求
    private function httpPost($uri, $data) {
        $url = $this->apiUrl . $uri;

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, [
            'Content-Type: application/json'
        ]);
        curl_setopt($ch, CURLOPT_TIMEOUT, 30);

        $response = curl_exec($ch);
        curl_close($ch);

        return json_decode($response, true);
    }
}

// 使用示例
$api = new PaymentAPI('10001', 'your_secret_key', 'https://api.yourpay.com');

// 创建代收订单
$result = $api->createPayOrder(
    100.00,                    // 金额
    'pix_001',                 // 通道编码
    'ORDER' . time(),          // 商户订单号
    'https://your-site.com/notify', // 通知地址
    '商品购买'                  // 商品描述
);

// 创建代付订单
$transferResult = $api->createTransferOrder(
    50.00,                     // 金额
    'pix_transfer',            // 通道编码
    'TRANSFER' . time(),       // 商户订单号
    'https://your-site.com/transfer-notify', // 通知地址
    '佣金发放',                 // 说明
    [                          // 收款人信息（数组参数）
        'name' => 'João Silva',
        'CPF' => '12345678901',
        'phone' => '+5511999999999',
        'email' => 'joao@example.com'
    ]
);

// 代付签名处理说明：
// extra_params 数组会被处理为：
// "CPF=12345678901&email=joao@example.com&name=João Silva&phone=+5511999999999"

// 回调验证示例
function verifyNotifySign($notifyData, $secretKey) {
    $receivedSign = $notifyData['sign'] ?? '';

    // 使用标准签名方法验证
    $api = new PaymentAPI('', $secretKey, '');
    $calculatedSign = $api->generateSign($notifyData);

    return $receivedSign === $calculatedSign;
}
?&gt;
                            </code>
                        </div>
                    </div>

                    <div id="examples-java" class="code-content">
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                            <code>import java.util.*;
import java.security.MessageDigest;
import java.net.http.*;
import java.net.URI;
import com.fasterxml.jackson.databind.ObjectMapper;

public class PaymentAPI {
    private String merchantId;
    private String secretKey;
    private String apiUrl;
    private HttpClient httpClient;
    private ObjectMapper objectMapper;

    public PaymentAPI(String merchantId, String secretKey, String apiUrl) {
        this.merchantId = merchantId;
        this.secretKey = secretKey;
        this.apiUrl = apiUrl;
        this.httpClient = HttpClient.newHttpClient();
        this.objectMapper = new ObjectMapper();
    }

    // 生成签名（支持数组参数）
    private String generateSign(Map<String, Object> params) throws Exception {
        Map<String, Object> signParams = new HashMap<>(params);
        signParams.remove("sign");

        // 处理数组参数
        for (Map.Entry<String, Object> entry : signParams.entrySet()) {
            Object value = entry.getValue();
            if (value instanceof Map) {
                @SuppressWarnings("unchecked")
                Map<String, Object> mapValue = (Map<String, Object>) value;
                List<String> mapKeys = new ArrayList<>(mapValue.keySet());
                Collections.sort(mapKeys);

                StringBuilder arrayStr = new StringBuilder();
                for (String mapKey : mapKeys) {
                    Object mapVal = mapValue.get(mapKey);
                    if (mapVal != null && !mapVal.toString().isEmpty()) {
                        if (arrayStr.length() > 0) arrayStr.append("&");
                        arrayStr.append(mapKey).append("=").append(mapVal);
                    }
                }
                signParams.put(entry.getKey(), arrayStr.toString());
            }
        }

        // 排序并过滤空值
        List<String> keys = new ArrayList<>();
        for (Map.Entry<String, Object> entry : signParams.entrySet()) {
            Object value = entry.getValue();
            if (value != null && !value.toString().isEmpty()) {
                keys.add(entry.getKey());
            }
        }
        Collections.sort(keys);

        StringBuilder signStr = new StringBuilder();
        for (String key : keys) {
            Object value = signParams.get(key);
            signStr.append(key).append("=").append(value).append("&");
        }
        signStr.append("key=").append(secretKey);

        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] digest = md.digest(signStr.toString().getBytes("UTF-8"));

        StringBuilder hexString = new StringBuilder();
        for (byte b : digest) {
            String hex = Integer.toHexString(0xff & b);
            if (hex.length() == 1) {
                hexString.append('0');
            }
            hexString.append(hex);
        }

        return hexString.toString().toUpperCase();
    }

    // 代收下单
    public Map<String, Object> createPayOrder(double amount, String channelCode,
            String merchantOrderNo, String notifyUrl, String subject) throws Exception {
        Map<String, Object> params = new HashMap<>();
        params.put("merchant_id", merchantId);
        params.put("amount", String.format("%.2f", amount));
        params.put("currency", "BRL");
        params.put("channel_code", channelCode);
        params.put("merchant_order_no", merchantOrderNo);
        params.put("notify_url", notifyUrl);
        params.put("subject", subject);
        params.put("timestamp", System.currentTimeMillis() / 1000);
        params.put("sign_type", "md5");

        String sign = generateSign(params);
        params.put("sign", sign);

        return httpPost("/pay/unifiedOrder", params);
    }

    // 代付下单
    public Map<String, Object> createTransferOrder(double amount, String channelCode,
            String merchantOrderNo, String notifyUrl, String subject,
            Map<String, String> extraParams) throws Exception {
        Map<String, Object> params = new HashMap<>();
        params.put("merchant_id", merchantId);
        params.put("amount", String.format("%.2f", amount));
        params.put("currency", "BRL");
        params.put("channel_code", channelCode);
        params.put("merchant_order_no", merchantOrderNo);
        params.put("notify_url", notifyUrl);
        params.put("subject", subject);
        params.put("extra_params", extraParams);
        params.put("timestamp", System.currentTimeMillis() / 1000);
        params.put("sign_type", "md5");

        String sign = generateSign(params);
        params.put("sign", sign);

        return httpPost("/repay/unifiedOrder", params);
    }

    // 查询订单
    public Map<String, Object> queryOrder(String merchantOrderNo) throws Exception {
        Map<String, Object> params = new HashMap<>();
        params.put("merchant_id", merchantId);
        params.put("merchant_order_no", merchantOrderNo);
        params.put("timestamp", System.currentTimeMillis() / 1000);
        params.put("sign_type", "md5");

        String sign = generateSign(params);
        params.put("sign", sign);

        return httpPost("/pay/query", params);
    }

    // HTTP请求
    private Map<String, Object> httpPost(String uri, Map<String, Object> data) throws Exception {
        String url = apiUrl + uri;
        String jsonBody = objectMapper.writeValueAsString(data);

        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .header("Content-Type", "application/json")
            .POST(HttpRequest.BodyPublishers.ofString(jsonBody))
            .timeout(java.time.Duration.ofSeconds(30))
            .build();

        HttpResponse<String> response = httpClient.send(request,
            HttpResponse.BodyHandlers.ofString());

        return objectMapper.readValue(response.body(), Map.class);
    }

    // 使用示例
    public static void main(String[] args) {
        try {
            PaymentAPI api = new PaymentAPI("10001", "your_secret_key",
                "https://api.yourpay.com");

            // 创建代收订单
            Map<String, Object> payResult = api.createPayOrder(
                100.00,                           // 金额
                "pix_001",                        // 通道编码
                "ORDER" + System.currentTimeMillis(), // 商户订单号
                "https://your-site.com/notify",   // 通知地址
                "商品购买"                         // 商品描述
            );
            System.out.println("代收订单创建结果: " + payResult);

            // 创建代付订单
            Map<String, String> extraParams = new HashMap<>();
            extraParams.put("name", "João Silva");
            extraParams.put("CPF", "12345678901");
            extraParams.put("phone", "+5511999999999");
            extraParams.put("email", "joao@example.com");

            Map<String, Object> transferResult = api.createTransferOrder(
                50.00,                            // 金额
                "pix_transfer",                   // 通道编码
                "TRANSFER" + System.currentTimeMillis(), // 商户订单号
                "https://your-site.com/transfer-notify", // 通知地址
                "佣金发放",                        // 说明
                extraParams                       // 收款人信息（无pix相关字段）
            );
            System.out.println("代付订单创建结果: " + transferResult);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
                            </code>
                        </div>
                    </div>

                    <div id="examples-js" class="code-content">
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                            <code>
const crypto = require('crypto');
const axios = require('axios');

class PaymentAPI {
    constructor(merchantId, secretKey, apiUrl) {
        this.merchantId = merchantId;
        this.secretKey = secretKey;
        this.apiUrl = apiUrl;
    }

    // 生成签名（支持数组参数）
    generateSign(params) {
        delete params.sign;

        // 处理数组参数
        for (const key in params) {
            if (typeof params[key] === 'object' && params[key] !== null && !Array.isArray(params[key])) {
                const obj = params[key];
                const sortedKeys = Object.keys(obj).sort();
                const pairs = [];

                sortedKeys.forEach(k => {
                    const v = obj[k];
                    if (v !== '' && v !== null && v !== undefined) {
                        pairs.push(`${k}=${v}`);
                    }
                });

                params[key] = pairs.join('&');
            }
        }

        // 排序并过滤空值
        const filteredParams = {};
        Object.keys(params).forEach(key => {
            const value = params[key];
            if (value !== '' && value !== null && value !== undefined) {
                filteredParams[key] = value;
            }
        });

        const sortedKeys = Object.keys(filteredParams).sort();
        let string = '';

        sortedKeys.forEach(key => {
            string += `${key}=${filteredParams[key]}&`;
        });
        string += `key=${this.secretKey}`;

        return crypto.createHash('md5').update(string).digest('hex').toUpperCase();
    }

    // 代收下单
    async createPayOrder(amount, channelCode, merchantOrderNo, notifyUrl, subject) {
        const params = {
            merchant_id: this.merchantId,
            amount: amount.toFixed(2),
            currency: 'BRL',
            channel_code: channelCode,
            merchant_order_no: merchantOrderNo,
            notify_url: notifyUrl,
            subject: subject,
            timestamp: Math.floor(Date.now() / 1000),
            sign_type: 'md5'
        };

        params.sign = this.generateSign({...params});

        try {
            const response = await axios.post(`${this.apiUrl}/pay/unifiedOrder`, params, {
                headers: {
                    'Content-Type': 'application/json'
                },
                timeout: 30000
            });

            return response.data;
        } catch (error) {
            throw new Error(`API请求失败: ${error.message}`);
        }
    }

    // 代付下单
    async createTransferOrder(amount, channelCode, merchantOrderNo, notifyUrl, subject, extraParams) {
        const params = {
            merchant_id: this.merchantId,
            amount: amount.toFixed(2),
            currency: 'BRL',
            channel_code: channelCode,
            merchant_order_no: merchantOrderNo,
            notify_url: notifyUrl,
            subject: subject,
            extra_params: extraParams,
            timestamp: Math.floor(Date.now() / 1000),
            sign_type: 'md5'
        };

        params.sign = this.generateSign({...params});

        try {
            const response = await axios.post(`${this.apiUrl}/repay/unifiedOrder`, params, {
                headers: {
                    'Content-Type': 'application/json'
                },
                timeout: 30000
            });

            return response.data;
        } catch (error) {
            throw new Error(`API请求失败: ${error.message}`);
        }
    }

    // 查询订单
    async queryOrder(merchantOrderNo) {
        const params = {
            merchant_id: this.merchantId,
            merchant_order_no: merchantOrderNo,
            timestamp: Math.floor(Date.now() / 1000),
            sign_type: 'md5'
        };

        params.sign = this.generateSign({...params});

        try {
            const response = await axios.post(`${this.apiUrl}/query/order`, params, {
                headers: {
                    'Content-Type': 'application/json'
                },
                timeout: 30000
            });

            return response.data;
        } catch (error) {
            throw new Error(`查询失败: ${error.message}`);
        }
    }
}

// 使用示例
const api = new PaymentAPI('10001', 'your_secret_key', 'https://api.yourpay.com');

// 创建代收订单
api.createPayOrder(
    100.00,
    'pix_001',
    `ORDER${Date.now()}`,
    'https://your-site.com/notify',
    '商品购买'
).then(result => {
    console.log('代收订单创建成功:', result);
}).catch(error => {
    console.error('代收订单创建失败:', error);
});

// 创建代付订单
const extraParams = {
    name: 'João Silva',
    CPF: '12345678901',
    phone: '+5511999999999',
    email: 'joao@example.com'
};

api.createTransferOrder(
    50.00,
    'pix_transfer',
    `TRANSFER${Date.now()}`,
    'https://your-site.com/transfer-notify',
    '佣金发放',
    extraParams
).then(result => {
    console.log('代付订单创建成功:', result);
}).catch(error => {
    console.error('代付订单创建失败:', error);
});
                            </code>
                        </div>
                    </div>
                </div>
            </div>
                </div>

                    <div id="auth" class="content-section">
                        <div class="section">
                            <h2><i class="fas fa-shield-alt"></i> 接口认证</h2>

                            <div class="alert alert-warning">
                                <strong>安全提醒：</strong> 请妥善保管您的商户密钥，不要在客户端代码中暴露密钥信息。
                            </div>

                            <h3><i class="fas fa-key"></i> 签名算法</h3>
                            <p>所有接口请求都需要进行签名验证，签名算法如下：</p>

                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                                <code>
1. 移除 sign 字段（如果存在）
2. 处理数组参数：将数组转换为 key=value&key=value 格式
3. 将所有参数（除空值外）按参数名ASCII码升序排序
4. 将排序后的参数按 key=value&key=value 格式拼接
5. 在拼接字符串末尾加上 &key=商户密钥
6. 对拼接后的字符串进行MD5加密，转为大写
                                </code>
                            </div>

                            <div class="alert alert-info">
                                <strong><i class="fas fa-info-circle"></i> 重要说明：</strong>
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li><strong>数组参数处理：</strong>如 extra_params 等数组字段，需转换为 "key1=value1&key2=value2" 格式</li>
                                    <li><strong>sign_type参数：</strong>必须包含，用于指定签名算法类型（如md5）</li>
                                    <li><strong>空值过滤：</strong>空字符串和null值不参与签名</li>
                                    <li><strong>签名类型：</strong>支持MD5（默认）、SHA256、HMAC等多种签名算法</li>
                                </ul>
                            </div>

                            <h3><i class="fas fa-code"></i> 基本签名示例</h3>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                                <code>
// 原始参数
{
  "merchant_id": "10001",
  "amount": "100.00",
  "currency": "BRL",
  "timestamp": "1640995200",
  "sign_type": "md5"
}

// 排序后拼接
amount=100.00&currency=BRL&merchant_id=10001&sign_type=md5&timestamp=1640995200&key=YOUR_SECRET_KEY

// MD5加密后
sign = MD5("amount=100.00&currency=BRL&merchant_id=10001&sign_type=md5&timestamp=1640995200&key=YOUR_SECRET_KEY").toUpperCase()
// 结果: 3CB67414A73ADAF9D4029EDD5FF9771E
                                </code>
                            </div>

                            <h3><i class="fas fa-code"></i> 代付数组参数签名示例</h3>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                                <code>
// 代付请求原始参数
{
  "merchant_id": "10001",
  "amount": "100.00",
  "currency": "BRL",
  "extra_params": {
    "name": "João Silva",
    "CPF": "12345678901",
    "phone": "+5511999999999"
  },
  "timestamp": "1640995200",
  "sign_type": "md5"
}

// 处理步骤：
// 1. 移除sign字段（如果存在）
// 2. 处理数组参数：extra_params 转换为字符串
//    extra_params = "CPF=12345678901&name=João Silva&phone=+5511999999999"
// 3. 排序并拼接
amount=100.00&currency=BRL&extra_params=CPF=12345678901&name=João Silva&phone=+5511999999999&merchant_id=10001&sign_type=md5&timestamp=1640995200&key=YOUR_SECRET_KEY

// 4. MD5加密并转大写
sign = MD5(上述字符串).toUpperCase()
                                </code>
                            </div>

                            <h3><i class="fas fa-info-circle"></i> 完整签名示例</h3>
                            <div class="alert alert-success">
                                <strong>标准流程：</strong>所有商户请求都按照统一的签名流程处理，无特殊排除字段。
                            </div>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                                <code>
// 完整的代付请求参数
{
  "merchant_id": "10001",
  "amount": "100.00",
  "currency": "BRL",
  "extra_params": {
    "name": "João Silva",
    "CPF": "12345678901",
    "phone": "+5511999999999",
    "email": "joao@example.com"
  },
  "timestamp": "1640995200",
  "sign_type": "md5"
}

// 标准签名字符串：
amount=100.00&currency=BRL&extra_params=CPF=12345678901&email=joao@example.com&name=João Silva&phone=+5511999999999&merchant_id=10001&sign_type=md5&timestamp=1640995200&key=YOUR_SECRET_KEY
                                </code>
                            </div>

                            <h3><i class="fas fa-tools"></i> 推荐签名方法</h3>
                            <div class="alert alert-success">
                                <strong><i class="fas fa-thumbs-up"></i> 推荐使用：</strong>
                                以下是经过优化的简洁签名方法，可直接使用。
                            </div>

                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                                <code>
/**
 * 签名方法（推荐版本）
 */
function merchantSign($data, $key) {
    // 移除sign字段
    unset($data['sign']);

    // 处理数组参数
    foreach ($data as $k => $v) {
        if (is_array($v)) {
            ksort($v);
            $arr = [];
            foreach ($v as $ak => $av) {
                if ($av !== '' && $av !== null) $arr[] = "$ak=$av";
            }
            $data[$k] = implode('&', $arr);
        }
    }

    // 排序并过滤空值
    ksort($data);
    $data = array_filter($data, function($v) {
        return $v !== '' && $v !== null;
    });

    // 构建签名字符串
    $pairs = [];
    foreach ($data as $k => $v) $pairs[] = "$k=$v";
    $signStr = implode('&', $pairs) . "&key=$key";

    return strtoupper(md5($signStr));
}

// 使用示例
$params = [
    'merchant_id' => 'your_merchant_id',
    'amount' => '100.00',
    'extra_params' => [
        'name' => 'João Silva',
        'CPF' => '12345678901'
    ],
    'timestamp' => time(),
    'sign_type' => 'md5'
];

$sign = merchantSign($params, 'your_secret_key');
$params['sign'] = $sign;

// 回调验证
$isValid = (merchantSign($_POST, $secretKey) === $_POST['sign']);
                                </code>
                            </div>

                            <h3><i class="fas fa-clock"></i> 时间戳验证</h3>
                            <p>为防止重放攻击，系统会验证请求时间戳，要求：</p>
                            <ul style="margin: 20px 0; padding-left: 30px;">
                                <li>timestamp 参数为10位Unix时间戳</li>
                                <li>请求时间与服务器时间差不超过5分钟</li>
                                <li>建议每次请求使用当前时间戳</li>
                            </ul>
                        </div>
                    </div>

                    <div id="currency" class="content-section">
                        <div class="section">
                            <h2><i class="fas fa-coins"></i> 货币代码</h2>

                            <div class="alert alert-info">
                                <strong>说明：</strong> 以下是系统支持的货币代码列表，请在接口调用时使用对应的货币代码。
                            </div>

                            <h3><i class="fas fa-globe"></i> 支持的货币</h3>

                            <table class="param-table">
                                <thead>
                                    <tr>
                                        <th>货币代码</th>
                                        <th>货币名称</th>
                                        <th>货币符号</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>BRL</code></td>
                                        <td>巴西雷亚尔</td>
                                        <td>R$</td>
                                        <td>巴西官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>USD</code></td>
                                        <td>美元</td>
                                        <td>$</td>
                                        <td>美国官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>EUR</code></td>
                                        <td>欧元</td>
                                        <td>€</td>
                                        <td>欧盟官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>CNY</code></td>
                                        <td>人民币</td>
                                        <td>¥</td>
                                        <td>中国官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>ARS</code></td>
                                        <td>阿根廷比索</td>
                                        <td>$</td>
                                        <td>阿根廷官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>MXN</code></td>
                                        <td>墨西哥比索</td>
                                        <td>$</td>
                                        <td>墨西哥官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>COP</code></td>
                                        <td>哥伦比亚比索</td>
                                        <td>$</td>
                                        <td>哥伦比亚官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>PEN</code></td>
                                        <td>秘鲁索尔</td>
                                        <td>S/</td>
                                        <td>秘鲁官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>CLP</code></td>
                                        <td>智利比索</td>
                                        <td>$</td>
                                        <td>智利官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>UYU</code></td>
                                        <td>乌拉圭比索</td>
                                        <td>$U</td>
                                        <td>乌拉圭官方货币</td>
                                    </tr>
                                    <tr>
                                        <td><code>KGS</code></td>
                                        <td>吉尔吉斯坦</td>
                                        <td>com</td>
                                        <td>吉尔吉斯斯坦官方货币</td>
                                    </tr>
                                </tbody>
                            </table>

                            <h3><i class="fas fa-info-circle"></i> 使用说明</h3>
                            <ul style="margin: 20px 0; padding-left: 30px;">
                                <li>所有金额字段都需要指定对应的货币代码</li>
                                <li>货币代码必须使用大写字母，如：BRL、USD、EUR</li>
                                <li>不同货币的最小金额限制可能不同，请咨询技术支持</li>
                                <li>汇率转换由系统自动处理，无需手动计算</li>
                            </ul>

                            <h3><i class="fas fa-code"></i> 使用示例</h3>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                                <code>
{
  "merchant_id": "10001",
  "amount": "100.00",
  "currency": "BRL",  // 巴西雷亚尔
  "order_id": "ORDER_20240101_001"
}
                                </code>
                            </div>
                        </div>
                    </div>

                    <div id="extra-params" class="content-section">
                        <div class="section">
                            <h2><i class="fas fa-user"></i> 收款人信息 (extra_params)</h2>

                            <div class="alert alert-info">
                                <strong><i class="fas fa-info-circle"></i> 说明：</strong>
                                <code>extra_params</code> 是代付接口中的收款人信息字段,为JSON对象格式。
                                不同国家/地区需要的参数不同,请根据实际支付通道要求填写。
                            </div>

                            <h3><i class="fas fa-cog"></i> 字段特性</h3>
                            <table class="param-table">
                                <thead>
                                    <tr>
                                        <th>特性</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>数据类型</strong></td>
                                        <td>JSON对象（Object）</td>
                                    </tr>
                                    <tr>
                                        <td><strong>存储方式</strong></td>
                                        <td>数据库JSON格式存储,支持动态扩展</td>
                                    </tr>
                                    <tr>
                                        <td><strong>签名处理</strong></td>
                                        <td>参与签名计算,转换为 "key1=value1&key2=value2" 格式</td>
                                    </tr>
                                    <tr>
                                        <td><strong>扩展性</strong></td>
                                        <td>可根据不同国家/通道要求添加字段</td>
                                    </tr>
                                </tbody>
                            </table>

                            <h3><i class="fas fa-map-marked-alt"></i> 各国家/地区参数要求</h3>

                            <!-- 巴西PIX - 可折叠 -->
                            <div id="brazil-params" class="collapsible-section active">
                                <div class="collapsible-header" onclick="toggleCollapsible('brazil-params')">
                                    <h4>
                                        <i class="fas fa-flag"></i>
                                        巴西 (Brazil) - PIX支付
                                    </h4>
                                    <i class="fas fa-chevron-down collapsible-icon"></i>
                                </div>
                                <div class="collapsible-content">
                                    <div class="collapsible-body">
                                        <table class="param-table">
                                            <thead>
                                                <tr>
                                                    <th>参数名</th>
                                                    <th>类型</th>
                                                    <th>必填</th>
                                                    <th>说明</th>
                                                    <th>示例值</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><code>name</code></td>
                                                    <td>String</td>
                                                    <td><span class="required">是</span></td>
                                                    <td>收款人姓名</td>
                                                    <td>João Silva</td>
                                                </tr>
                                                <tr>
                                                    <td><code>CPF</code></td>
                                                    <td>String</td>
                                                    <td><span class="optional">条件*</span></td>
                                                    <td>个人税号（11位）</td>
                                                    <td>12345678901</td>
                                                </tr>
                                                <tr>
                                                    <td><code>CNPJ</code></td>
                                                    <td>String</td>
                                                    <td><span class="optional">条件*</span></td>
                                                    <td>企业税号（14位）</td>
                                                    <td>12345678000190</td>
                                                </tr>
                                                <tr>
                                                    <td><code>PHONE</code></td>
                                                    <td>String</td>
                                                    <td><span class="optional">条件*</span></td>
                                                    <td>手机号（含国家代码）</td>
                                                    <td>+5511999999999</td>
                                                </tr>
                                                <tr>
                                                    <td><code>EMAIL</code></td>
                                                    <td>String</td>
                                                    <td><span class="optional">条件*</span></td>
                                                    <td>邮箱地址</td>
                                                    <td>joao@example.com</td>
                                                </tr>
                                                <tr>
                                                    <td><code>EVP</code></td>
                                                    <td>String</td>
                                                    <td><span class="optional">条件*</span></td>
                                                    <td>PIX随机密钥</td>
                                                    <td>abc123-def456</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="alert alert-info" style="margin-top: 10px;">
                                            <strong>* 条件必填：</strong>CPF/CNPJ、PHONE、EMAIL、EVP 至少填写一个。优先级：EVP > CPF/CNPJ > PHONE > EMAIL
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 吉尔吉斯斯坦 - 可折叠 -->
                            <div id="kyrgyzstan-params" class="collapsible-section">
                                <div class="collapsible-header" onclick="toggleCollapsible('kyrgyzstan-params')">
                                    <h4>
                                        <i class="fas fa-flag"></i>
                                        吉尔吉斯斯坦 (Kyrgyzstan) - 银行转账
                                    </h4>
                                    <i class="fas fa-chevron-down collapsible-icon"></i>
                                </div>
                                <div class="collapsible-content">
                                    <div class="collapsible-body">
                                        <table class="param-table">
                                            <thead>
                                                <tr>
                                                    <th>参数名</th>
                                                    <th>类型</th>
                                                    <th>必填</th>
                                                    <th>说明</th>
                                                    <th>示例值</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><code>bankaccount</code></td>
                                                    <td>String</td>
                                                    <td><span class="required">是</span></td>
                                                    <td>收款账号</td>
                                                    <td>12345678901</td>
                                                </tr>
                                                <tr>
                                                    <td><code>bankname</code></td>
                                                    <td>String</td>
                                                    <td><span class="required">是</span></td>
                                                    <td>收款姓名</td>
                                                    <td>Optima Bank</td>
                                                </tr>
                                                <tr>
                                                    <td><code>banks</code></td>
                                                    <td>String</td>
                                                    <td><span class="optional">否</span></td>
                                                    <td>银行名称（可选）</td>
                                                    <td>OPTIMA</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- 预留：其他国家 -->
                            <div style="background: #f8f9fa; border: 2px dashed #dee2e6; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                <h4 style="color: #6c757d; margin: 0 0 10px 0;">
                                    <i class="fas fa-plus-circle"></i> 其他国家/地区
                                </h4>
                                <p style="color: #6c757d; margin: 0;">
                                    支持美国、印度、欧洲等多个国家/地区,参数要求请联系技术支持或查看后续更新。
                                </p>
                            </div>

                            <h3><i class="fas fa-code"></i> 使用示例</h3>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard(this)">复制</button>
                                <code>// 巴西PIX - 使用CPF
{
    "name": "João Silva",
    "CPF": "12345678901"
}

// 巴西PIX - 使用EVP密钥
{
    "name": "Maria Santos",
    "EVP": "abc123-def456-ghi789"
}

// 吉尔吉斯斯坦 - 银行转账
{
    "name": "Aibek Asanov",
    "bankaccount": "12345678901",
    "bankname": "Optima Bank",
    "banks": "OPTIMA"
}

// 包含可选业务字段
{
    "name": "Pedro Santos",
    "CPF": "11122233344",
    "memo": "佣金发放"
}</code>
                            </div>

                            <h3><i class="fas fa-info-circle"></i> 重要说明</h3>
                            <ul style="margin: 20px 0; padding-left: 30px;">
                                <li><strong>国家差异：</strong>不同国家/地区需要的字段不同,请参考上方表格</li>
                                <li><strong>扩展字段：</strong>可添加自定义字段（如memo、user_id）用于业务需求</li>
                                <li><strong>数据大小：</strong>建议总大小不超过 4KB</li>
                                <li><strong>签名计算：</strong>字段按字母序排序后参与签名</li>
                                <li><strong>空值处理：</strong>空字符串和null值不参与签名</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Footer 应该在 content-body 内部 -->
                    <div class="footer">
                        <p>&copy; 2024 PaymentAPI Documentation</p>
                        <p>
                            For technical support: <a href="mailto:dev@paymentapi.com">dev@paymentapi.com</a>
                        </p>
                    </div>
                </div>
            </div>

            <!-- 右侧目录索引 -->
            <div class="toc-sidebar" id="toc-sidebar">
                <div class="toc-title">目录导航</div>
                <ul class="toc-list" id="toc-list">
                    <!-- 目录将通过JavaScript动态生成 -->
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        function showSection(sectionName) {
            // Hide all content sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Remove active class from all nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionName).classList.add('active');

            // Add active class to clicked nav item
            event.target.classList.add('active');

            // Update content title
            const titles = {
                'overview': '接口概述',
                'auth': '接口认证',
                'currency': '货币代码',
                'collection': '代收接口',
                'transfer': '代付接口',
                'extra-params': '收款人信息',
                'order-query': '订单查询',
                'balance-query': '余额查询',
                'collection-callback': '代收回调',
                'transfer-callback': '代付回调',
                'order-receipt': '订单凭证',
                'examples': '示例代码'
            };
            document.getElementById('content-title').textContent = titles[sectionName] || '文档';

            // Close mobile menu if open
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('open');
            }

            // Generate table of contents and fix layout
            setTimeout(() => {
                console.log(`Switching to section: ${sectionName}`);
                generateTOC();

                // Fix indentation for the current section
                if (typeof fixIndentation === 'function') {
                    fixIndentation();
                }

                // Debug the current state
                if (typeof debugPageStructure === 'function') {
                    debugPageStructure();
                }
            }, 200); // 增加延迟确保DOM更新完成

            // Smooth scroll to top
            const contentBody = document.querySelector('.content-body');
            if (contentBody) {
                contentBody.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            } else {
                // 如果找不到 content-body，滚动整个窗口
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
        }

        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // 标签页切换函数
        function switchCodeTab(button, targetId) {
            // 获取当前标签页容器
            const container = button.closest('.code-example-container');
            if (!container) return;

            // 移除所有标签页的active状态
            const tabs = container.querySelectorAll('.code-tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // 隐藏所有内容
            const contents = container.querySelectorAll('.code-content');
            contents.forEach(content => content.classList.remove('active'));

            // 激活当前标签页
            button.classList.add('active');

            // 显示对应内容
            const targetContent = document.getElementById(targetId);
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }

        // 折叠区域切换函数
        function toggleCollapsible(elementId) {
            const element = document.getElementById(elementId);
            if (!element) return;

            element.classList.toggle('active');
        }

        // 导航栏子菜单切换函数
        function toggleNavSubmenu(parentId) {
            const parent = document.getElementById(parentId);
            if (!parent) return;

            parent.classList.toggle('expanded');
        }

        // 生成目录
        function generateTOC() {
            const activeSection = document.querySelector('.content-section.active');
            const tocList = document.getElementById('toc-list');

            console.log('Generating TOC...', {
                activeSection: activeSection ? activeSection.id : 'none',
                tocList: !!tocList
            });

            if (!activeSection || !tocList) {
                console.warn('Cannot generate TOC: missing elements');
                return;
            }

            const headings = activeSection.querySelectorAll('h2, h3');
            console.log(`Found ${headings.length} headings`);
            tocList.innerHTML = '';

            headings.forEach((heading, index) => {
                const level = heading.tagName.toLowerCase();
                const text = heading.textContent.replace(/^\s*[\d\.\s]*/, ''); // 移除编号
                const id = `heading-${index}`;

                // 给标题添加ID，用于锚点跳转
                heading.id = id;

                const li = document.createElement('li');
                li.className = 'toc-item';

                const a = document.createElement('a');
                a.href = `#${id}`;
                a.className = `toc-link level-${level.charAt(1)}`;
                a.textContent = text;
                a.onclick = function(e) {
                    e.preventDefault();
                    console.log(`TOC clicked: ${id}`);

                    const targetElement = document.getElementById(id);
                    if (targetElement) {
                        console.log(`Target element found: ${targetElement.tagName}`);

                        // 获取目标元素的位置
                        const rect = targetElement.getBoundingClientRect();
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        const targetPosition = rect.top + scrollTop - 100; // 留出100px的顶部空间

                        // 平滑滚动到目标位置
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });

                        // 更新活跃状态
                        setTimeout(() => {
                            updateActiveTOC(id);
                        }, 100);
                    } else {
                        console.warn(`Target element not found: ${id}`);
                    }
                };

                li.appendChild(a);
                tocList.appendChild(li);
            });
        }

        // 更新目录活跃状态
        function updateActiveTOC(activeId) {
            const tocLinks = document.querySelectorAll('.toc-link');
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${activeId}`) {
                    link.classList.add('active');
                }
            });
        }

        // 滚动监听，自动更新目录活跃状态
        function setupScrollSpy() {
            const contentBody = document.querySelector('.content-body');
            if (!contentBody) {
                console.warn('Content body not found, scroll spy disabled');
                return;
            }

            contentBody.addEventListener('scroll', function() {
                const headings = document.querySelectorAll('.content-section.active h2, .content-section.active h3');
                let activeHeading = null;

                headings.forEach(heading => {
                    const rect = heading.getBoundingClientRect();
                    if (rect.top <= 100 && rect.top >= -100) {
                        activeHeading = heading;
                    }
                });

                if (activeHeading) {
                    updateActiveTOC(activeHeading.id);
                }
            });
        }

        function copyToClipboard(button) {
            const codeBlock = button.nextElementSibling;
            const text = codeBlock.textContent.trim();

            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showCopySuccess(button);
                }).catch(() => {
                    fallbackCopyTextToClipboard(text, button);
                });
            } else {
                fallbackCopyTextToClipboard(text, button);
            }
        }

        function fallbackCopyTextToClipboard(text, button) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";

            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                document.execCommand('copy');
                showCopySuccess(button);
            } catch (err) {
                console.error('复制失败', err);
            }

            document.body.removeChild(textArea);
        }

        function showCopySuccess(button) {
            const originalText = button.textContent;
            button.textContent = '已复制!';
            button.style.background = '#28a745';

            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '#667eea';
            }, 2000);
        }

        // Add smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add loading animation with tech effect
        window.addEventListener('load', function() {
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 0.8s ease';

            // Create loading effect
            const loadingOverlay = document.createElement('div');
            loadingOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: var(--bg-primary);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                transition: opacity 0.5s ease;
            `;
            loadingOverlay.innerHTML = `
                <div style="text-align: center;">
                    <div style="width: 32px; height: 32px; border: 2px solid #e5e7eb; border-top: 2px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 16px;"></div>
                    <div style="color: var(--text-secondary); font-size: 0.875rem;">Loading Documentation...</div>
                </div>
            `;

            // Add spin animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            `;
            document.head.appendChild(style);
            document.body.appendChild(loadingOverlay);

            setTimeout(() => {
                loadingOverlay.style.opacity = '0';
                document.body.style.opacity = '1';
                setTimeout(() => {
                    document.body.removeChild(loadingOverlay);
                }, 500);
            }, 1000);
        });

        // Add keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case '1':
                        e.preventDefault();
                        document.querySelector('[onclick="showSection(\'overview\')"]').click();
                        break;
                    case '2':
                        e.preventDefault();
                        document.querySelector('[onclick="showSection(\'auth\')"]').click();
                        break;
                    case '3':
                        e.preventDefault();
                        document.querySelector('[onclick="showSection(\'collection\')"]').click();
                        break;
                    case '4':
                        e.preventDefault();
                        document.querySelector('[onclick="showSection(\'transfer\')"]').click();
                        break;
                    case '5':
                        e.preventDefault();
                        document.querySelector('[onclick="showSection(\'query\')"]').click();
                        break;
                    case '6':
                        e.preventDefault();
                        document.querySelector('[onclick="showSection(\'callback\')"]').click();
                        break;
                    case '7':
                        e.preventDefault();
                        document.querySelector('[onclick="showSection(\'examples\')"]').click();
                        break;
                }
            }
        });

        // Add search functionality
        function addSearchBox() {
            const sidebar = document.querySelector('.nav-menu');
            if (!sidebar) {
                console.warn('Navigation menu not found, search box not added');
                return;
            }

            console.log('Adding search box to sidebar');
            const searchBox = document.createElement('div');
            searchBox.innerHTML = `
                <div style="padding: 0 20px 20px 20px; border-bottom: 1px solid var(--border-color); margin-bottom: 20px;">
                    <input type="text" id="searchInput" placeholder="搜索文档内容..."
                           style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 6px;
                                  font-size: 0.875rem; outline: none; background: var(--bg-primary); color: var(--text-primary);">
                    <div id="searchResults" style="margin-top: 8px; display: none; max-height: 200px; overflow-y: auto;"></div>
                </div>
            `;
            sidebar.insertBefore(searchBox, sidebar.firstChild);

            // 等待DOM更新后再获取元素
            setTimeout(() => {
                const searchInput = document.getElementById('searchInput');
                const searchResults = document.getElementById('searchResults');

                if (!searchInput || !searchResults) {
                    console.warn('Search elements not found after DOM update');
                    console.log('Available elements:', {
                        searchInput: !!searchInput,
                        searchResults: !!searchResults,
                        allInputs: document.querySelectorAll('input').length,
                        allDivs: document.querySelectorAll('#searchResults').length
                    });
                    return;
                }

                console.log('Search elements found, setting up events');
                setupSearchEvents(searchInput, searchResults);
            }, 100); // 增加延迟时间
        }

        // 设置搜索事件
        function setupSearchEvents(searchInput, searchResults) {
            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase().trim();
                if (query.length < 2) {
                    searchResults.style.display = 'none';
                    return;
                }

                const allText = document.querySelectorAll('.content-section h2, .content-section h3, .content-section p, .content-section td');
                const results = [];

                try {
                    allText.forEach(element => {
                        if (element && element.textContent && element.textContent.toLowerCase().includes(query)) {
                            const section = element.closest('.content-section');
                            if (section && section.id) {
                                const sectionId = section.id;
                                const navItem = document.querySelector(`[onclick="showSection('${sectionId}')"]`);
                                const sectionName = navItem ? navItem.textContent.trim() : sectionId;
                                results.push({
                                    text: element.textContent.substring(0, 100) + '...',
                                    section: sectionName,
                                    sectionId: sectionId
                                });
                            }
                        }
                    });
                } catch (error) {
                    console.error('Error in search:', error);
                }

                if (results.length > 0) {
                    searchResults.innerHTML = results.slice(0, 5).map(result =>
                        `<div style="padding: 8px; background: #f8f9fa; margin: 2px 0; border-radius: 5px; cursor: pointer;"
                              onclick="showSection('${result.sectionId}')">
                            <strong>${result.section}</strong><br>
                            <small>${result.text}</small>
                         </div>`
                    ).join('');
                    searchResults.style.display = 'block';
                } else {
                    searchResults.innerHTML = '<div style="padding: 8px; color: #999;">未找到相关内容</div>';
                    searchResults.style.display = 'block';
                }
            });

            // Hide search results when clicking outside
            document.addEventListener('click', function(e) {
                const searchContainer = searchInput.closest('div');
                if (searchContainer && !searchContainer.contains(e.target)) {
                    searchResults.style.display = 'none';
                }
            });
        }

        // 强力修复所有页面的布局问题
        function fixIndentation() {
            try {
                console.log('Applying powerful layout fix...');

                // 添加强力CSS修复
                const style = document.createElement('style');
                style.textContent = `
                    /* 强力修复所有布局问题 */
                    .content-section {
                        margin: 0 !important;
                        padding: 0 !important;
                    }

                    .content-section .section {
                        margin: 0 !important;
                        padding: 0 !important;
                    }

                    .content-section .section > * {
                        margin-left: 0 !important;
                        padding-left: 0 !important;
                    }

                    .content-section h2,
                    .content-section h3,
                    .content-section p,
                    .content-section div,
                    .content-section table,
                    .content-section .code-block,
                    .content-section .alert,
                    .content-section .api-endpoint,
                    .content-section ul,
                    .content-section ol {
                        margin-left: 0 !important;
                        padding-left: 0 !important;
                    }

                    /* 恢复必要的内边距 */
                    .content-section table th,
                    .content-section table td {
                        padding: 12px 16px !important;
                    }

                    .content-section .code-block {
                        padding: 20px !important;
                    }

                    .content-section .alert {
                        padding: 16px 20px !important;
                    }

                    .content-section .api-endpoint {
                        padding: 20px !important;
                    }

                    .content-section ul,
                    .content-section ol {
                        padding-left: 20px !important;
                    }
                `;
                document.head.appendChild(style);

                console.log('Powerful layout fix applied');
            } catch (error) {
                console.error('Error applying layout fix:', error);
            }
        }

        // 全局错误处理
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
        });

        // 调试页面结构
        function debugPageStructure() {
            console.log('=== Page Structure Debug ===');
            console.log('Main content:', !!document.querySelector('.main-content'));
            console.log('Content wrapper:', !!document.querySelector('.content-wrapper'));
            console.log('Content body:', !!document.querySelector('.content-body'));
            console.log('TOC sidebar:', !!document.querySelector('.toc-sidebar'));

            const sections = document.querySelectorAll('.content-section');
            console.log(`Found ${sections.length} content sections:`);
            sections.forEach(section => {
                console.log(`- ${section.id}: ${section.classList.contains('active') ? 'ACTIVE' : 'inactive'}`);
            });

            const activeSection = document.querySelector('.content-section.active');
            if (activeSection) {
                const headings = activeSection.querySelectorAll('h2, h3');
                console.log(`Active section has ${headings.length} headings`);
            }
        }

        // Initialize search box and TOC
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing components...');
            try {
                console.log('1. Adding search box...');
                addSearchBox();

                console.log('2. Generating TOC...');
                generateTOC();

                console.log('3. Setting up scroll spy...');
                setupScrollSpy();

                console.log('4. Fixing indentation...');
                fixIndentation(); // 修复缩进问题

                console.log('5. Debug page structure...');
                debugPageStructure();

                console.log('Initialization complete');
            } catch (error) {
                console.error('Error during initialization:', error);
            }
        });



        // Add hover effects for interactive elements
        document.addEventListener('DOMContentLoaded', function() {
            // Add glow effect to buttons
            const buttons = document.querySelectorAll('.nav-tab, .copy-btn');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.boxShadow = '0 0 20px rgba(0, 212, 255, 0.5)';
                });
                button.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('active')) {
                        this.style.boxShadow = '';
                    }
                });
            });

            // Add typing effect to code blocks
            const codeBlocks = document.querySelectorAll('.code-block code');
            codeBlocks.forEach(block => {
                const originalText = block.textContent;
                block.addEventListener('mouseenter', function() {
                    this.style.borderLeft = '3px solid var(--primary-color)';
                    this.style.paddingLeft = '20px';
                    this.style.transition = 'all 0.3s ease';
                });
                block.addEventListener('mouseleave', function() {
                    this.style.borderLeft = '';
                    this.style.paddingLeft = '';
                });
            });
        });
        
        const ACCESS_PASSWORD_HASH = 'a01735ecf31013e03174f7e8c7e530fdd3895576a3fab22822f1496d1948ca13';
        const SESSION_KEY = 'api_doc_authenticated';
        
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        window.addEventListener('load', function() {

            if (sessionStorage.getItem(SESSION_KEY) === 'true') {
                hideAuthOverlay();
            } else {
                showAuthOverlay();
            }

            document.getElementById('passwordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkPassword();
                }
            });
        });

        function showAuthOverlay() {
            document.getElementById('authOverlay').classList.remove('hidden');
            document.getElementById('passwordInput').focus();
        }

        function hideAuthOverlay() {
            document.getElementById('authOverlay').classList.add('hidden');
        }

        async function checkPassword() {
            const inputPassword = document.getElementById('passwordInput').value;
            const errorElement = document.getElementById('authError');

            try {

                const inputHash = await sha256(inputPassword);

                if (inputHash === ACCESS_PASSWORD_HASH) {
                    sessionStorage.setItem(SESSION_KEY, 'true');
                    hideAuthOverlay();
                    errorElement.style.display = 'none';
                } else {
                    showPasswordError(errorElement);
                }
            } catch (error) {
                console.error('密码验证出错:', error);
                showPasswordError(errorElement);
            }
        }

        function showPasswordError(errorElement) {
            errorElement.style.display = 'block';
            document.getElementById('passwordInput').value = '';
            document.getElementById('passwordInput').focus();
            setTimeout(() => {
                errorElement.style.display = 'none';
            }, 3000);
        }
        
        function logout() {
            sessionStorage.removeItem(SESSION_KEY);
            showAuthOverlay();
        }
    </script>
</body>
</html>
